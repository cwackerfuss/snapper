{"version":3,"sources":["animation.js"],"names":["maxTravel","paperWidth","paperHeight","startingPoints","pointDiameter","pointSpeed","maxConnectingDistance","s","Snap","lines","points","inittedConnect","newLine","x1","y1","x2","y2","color","line","attr","strokeWidth","stroke","strokeOpacity","newPoint","x","y","circle","fill","fillOpacity","generatePoints","i","randX","randomIntFromInterval","randY","generatedPoint","dest","push","connectPoints","length","pointX","node","cx","animVal","value","pointY","cy","q","comparePointX","comparePointY","distance","calculateDistance","lineExists","connectsTo","lineIndex","lineEl","pointAnim","anims","Object","keys","animationTimeRemaining","status","animate","mina","linear","pos","lineId","id","el","index","remove","splice","entries","Math","sqrt","min","max","floor","random","getNearbyCoordinate","start","axis","negOrPos","rand","coord","runAnimation","point","startX","startY","toX","toY","asyncLoop","o","loop","callback","functionToLoop","loopRunAnim","setTimeout","loopConnectPoints","throttle","fn","threshhold","scope","last","deferTimer","context","now","Date","args","arguments","clearTimeout","apply","createMousePoint","isMouse","destroyMousePoint","pop","docReadyCallback","addEventListener","event","offsetX","offsetY","document","readyState","documentElement","doScroll","window","clearSnap","clear"],"mappings":"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","file":"animation.js","sourcesContent":["const maxTravel = 50;\nconst paperWidth = 1200;\nconst paperHeight = 600;\nconst startingPoints = 20;\nconst pointDiameter = 2;\nconst pointSpeed = 7000; // randomIntFromInterval(4000,6000);\nconst maxConnectingDistance = paperWidth * paperHeight * 0.0005;\n\nvar s = Snap(paperWidth,paperHeight);\nvar lines = [];\nvar points = [];\nvar inittedConnect = false;\n\nfunction newLine(x1, y1, x2, y2, color) {\n    return s.line(x1, y1, x2, y2).attr({strokeWidth:1,stroke:color ? color : 'white', strokeOpacity:\"0\"});\n}\n\nfunction newPoint(x, y) {\n    return s.circle(x, y, pointDiameter).attr({fill:\"white\", fillOpacity:\"1\"})\n}\n\nfunction generatePoints() {\n    for (let i = 0; i < startingPoints; i++) {\n        let randX = randomIntFromInterval(paperWidth, 10);\n        let randY = randomIntFromInterval(paperHeight, 10);\n        let generatedPoint = newPoint(randX, randY)\n        generatedPoint.startingPoints = {x: randX, y: randY};\n        generatedPoint.dest = {x: 0, y: 0};\n        points.push( generatedPoint )\n    }\n}\n\nfunction connectPoints() {\n    for (let i = 0; i < points.length; i++) {\n        points[i].lines = points[i].lines ? points[i].lines : [];\n        let pointX = points[i].node.cx.animVal.value;\n        let pointY = points[i].node.cy.animVal.value;\n        for (let q = i + 1; q < points.length; q++) {\n            points[q].lines = points[q].lines ? points[q].lines : [];\n            let comparePointX = points[q].node.cx.animVal.value;\n            let comparePointY = points[q].node.cy.animVal.value;\n            let distance = calculateDistance(pointX, pointY, comparePointX, comparePointY)\n            if (distance < maxConnectingDistance) {\n                let lineExists = false;\n                for (const line of points[i].lines) {\n                    if (line.connectsTo === q) {\n                        lineExists = true;\n                    }\n                }\n                if (!lineExists) {\n\n                    let x1 = points[i].node.cx.animVal.value;\n                    let y1 = points[i].node.cy.animVal.value;\n                    let x2 = points[q].node.cx.animVal.value;\n                    let y2 = points[q].node.cy.animVal.value\n\n                    const lineIndex = lines.push( newLine(x1, y1, x2, y2, inittedConnect ? 'white' : 'white') )\n\n                    const lineEl = lines[lineIndex-1];\n                    const pointAnim = points[i].anims[Object.keys(points[i].anims)[0]]\n                    const animationTimeRemaining = pointAnim ? ((1 - pointAnim.status()) * pointSpeed) : pointSpeed;\n                    lineEl.animate(\n                        {\n                            x1: points[i].dest.x,\n                            y1: points[i].dest.y,\n                            x2: points[q].dest.x,\n                            y2: points[q].dest.y\n                        },\n                        animationTimeRemaining,\n                        mina.linear,\n                        () => {}\n                    )\n                    lineEl.animate(\n                        {\n                            strokeOpacity:\"0.3\"\n                        },\n                        pointSpeed/3,\n                        mina.linear,\n                        () => {}\n                    )\n                    points[i].lines.push({pos: 1, connectsTo: q, lineId: lineEl.id, el: lines[lineIndex-1]})\n                    points[q].lines.push({pos: 2, connectsTo: i, lineId: lineEl.id, el: lineEl})\n                }\n            } else {\n                for (let [index, line] of points[i].lines.entries()) {\n                    if (line.connectsTo === q) {\n                        line.el.animate(\n                            {strokeOpacity:\"0\"},\n                            750,\n                            mina.linear,\n                            () => { line.el.remove() }\n                        )\n                        points[i].lines.splice(index, 1);\n                    }\n                }\n                for (let [index, line] of points[q].lines.entries()) {\n\n                    if (line.connectsTo === i) {\n                        points[q].lines.splice(index, 1);\n                    }\n                }\n            }\n        }\n    }\n    inittedConnect = true;\n}\n\nfunction calculateDistance(x1, y1, x2, y2) {\n    return Math.sqrt( (x1-x2)*(x1-x2) + (y1-y2)*(y1-y2) )\n}\n\nfunction randomIntFromInterval(min, max) {\n    return Math.floor(Math.random() * (max - min + 1) + min);\n}\n\nfunction getNearbyCoordinate(start, axis) {\n    let negOrPos = Math.random() < 0.5 ? -1 : 1;\n    let rand = randomIntFromInterval(maxTravel, 10)\n    let coord = start + (negOrPos * rand)\n    if (axis === 'x') {\n        if (coord > paperWidth) {\n            coord = coord - maxTravel;\n        } else if (coord < 0) {\n            coord = coord + maxTravel;\n        }\n    }\n    else {\n        if (coord > paperHeight) {\n            coord = coord - maxTravel;\n        } else if (coord < 0) {\n            coord = coord + maxTravel;\n        }\n    }\n    return coord;\n}\n\nfunction runAnimation() {\n    for (let point of points) {\n        const startX = point.startingPoints.x;\n        const startY = point.startingPoints.y;\n        const toX = getNearbyCoordinate(startX, 'x');\n        const toY = getNearbyCoordinate(startY, 'y');\n        point.dest = {x: toX, y: toY};\n        point.animate(\n            {cx: toX, cy: toY},\n            pointSpeed,\n            mina.linear\n        )\n        for (let line of point.lines) {\n            line.el.animate(\n                {['x' + line.pos]: toX, ['y' + line.pos]: toY},\n                pointSpeed,\n                mina.linear\n            )\n        }\n    }\n    return;\n}\n\n///////////////////////////////////////////////\n// INITTING ///////////////////////////////////\n///////////////////////////////////////////////\n\nvar asyncLoop = function(o){\n    var i = -1;\n    var loop = function(){\n        i++;\n        if (i == o.length) {\n            o.callback();\n            return;\n        }\n        o.functionToLoop(loop, i);\n    }\n    loop();\n}\n\nfunction loopRunAnim() {\n    asyncLoop({\n        length: 10000,\n        functionToLoop: function(loop, i){\n            setTimeout(function(){\n                runAnimation();\n                loop();\n            }, pointSpeed);\n        },\n        callback(){}\n    });\n}\n\nfunction loopConnectPoints() {\n    asyncLoop({\n        length: 10000,\n        functionToLoop: function(loop, i){\n            setTimeout(function(){\n                connectPoints()\n                loop();\n            }, pointSpeed/5);\n        },\n        callback(){}\n    });\n}\n\nfunction throttle(fn, threshhold, scope) {\n  threshhold || (threshhold = 250);\n  var last,\n      deferTimer;\n  return function () {\n    var context = scope || this;\n\n    var now = +new Date,\n        args = arguments;\n    if (last && now < last + threshhold) {\n      // hold on to it\n      clearTimeout(deferTimer);\n      deferTimer = setTimeout(function () {\n        last = now;\n        fn.apply(context, args);\n      }, threshhold);\n    } else {\n      last = now;\n      fn.apply(context, args);\n    }\n  };\n}\n\nfunction createMousePoint(x, y) {\n    let generatedPoint = newPoint(x, y);\n    generatedPoint.startingPoints = {x, y};\n    generatedPoint.dest = {x, y};\n    generatedPoint.isMouse = true;\n    points.push( generatedPoint )\n}\n\nfunction destroyMousePoint() {\n    points[points.length-1].remove();\n    points.pop();\n}\n\nvar docReadyCallback = function(){\n    generatePoints();\n    connectPoints()\n    runAnimation();\n    loopConnectPoints();\n    loopRunAnim()\n\n    // s.mousemove(throttle(function(event) {\n    //     createMousePoint(event.offsetX, event.offsetY);\n    // }, 300))\n    // console.log('s: ', s)\n    s.node.addEventListener(\"mouseenter\", function(event) {\n        createMousePoint(event.offsetX, event.offsetY);\n    })\n    s.node.addEventListener(\"mouseleave\", function(event) {\n        destroyMousePoint();\n    })\n\n    // s.mousemove(throttle(function(event) {\n    //     createMousePoint(event.offsetX, event.offsetY);\n    // }, 300))\n\n    // s.unmouseout(function(event) {\n    //     console.log('unmouseout.')\n    // })\n    // s.mouseout(function(event) {\n    //     console.log('mouseout.')\n    // })\n};\n\nif ( document.readyState === \"complete\" || (document.readyState !== \"loading\" && !document.documentElement.doScroll)) {\n  docReadyCallback();\n} else {\n  document.addEventListener(\"DOMContentLoaded\", docReadyCallback);\n}\n\nwindow.clearSnap = function() {\n    s.clear();\n}\n"]}